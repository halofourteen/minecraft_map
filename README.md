# Генератор карты Minecraft

Этот проект позволяет создать интерактивную веб-карту вашего мира Minecraft локально на вашем компьютере.

## Требования

-   Windows 10/11
-   Python 3.8.10 или новее (рекомендуется: https://www.python.org/downloads/release/python-3810/)
-   Минимум 8 ГБ оперативной памяти

## Важно! Расположение проекта

**Для корректной работы рекомендуется разместить проект ближе к корню диска, например:**

```
C:\minecraft_map\
```

Это поможет избежать проблем с длинными путями и кириллицей в пути.

## Структура мира Minecraft

Для корректной генерации карты всех измерений (обычный мир, Нижний мир, Край) необходимо, чтобы в папке `map_backup` были следующие директории:

```
map_backup/
├── level.dat                # Основной файл мира
├── region/                  # Файлы обычного мира (*.mca)
├── DIM-1/                   # Директория Нижнего мира
│   └── region/              # Файлы Нижнего мира (*.mca)
└── DIM1/                    # Директория Края
    └── region/              # Файлы Края (*.mca)
```

Если какие-то из этих директорий отсутствуют, соответствующие измерения не будут отображены на карте.

Вы можете использовать скрипт `check_dimensions.bat` для проверки и создания необходимых директорий.

## Установка и настройка

### 1. Установка Python

1. Скачайте Python 3.8.10 или новее с официального сайта:
   https://www.python.org/downloads/release/python-3810/
2. Установите Python:
    - Во время установки обязательно отметьте галочку "Add Python to PATH"
    - После установки перезагрузите компьютер
    - Убедитесь, что Python установлен, выполнив в командной строке:
        ```
        python --version
        ```

### 2. Структура проекта

Проект уже содержит все необходимые файлы и папки:

```
minecraft_map/
├── overviwer/           # Программа для генерации карты
├── map_backup/          # Файлы мира Minecraft (уже включены)
├── map/                 # Здесь будет сгенерированная карта
└── minecraft_assets/    # Текстуры игры
    └── 1.21.4_optifine/ # Папка с файлом client.jar
```

**Примечание:** Если вы хотите использовать свой мир Minecraft вместо предоставленного, замените содержимое папки `map_backup` файлами вашего мира.

### 3. Проверка структуры мира

Перед генерацией карты рекомендуется проверить структуру мира:

1. Запустите скрипт проверки структуры мира:

    ```
    check_dimensions.bat
    ```

2. Скрипт проверит наличие необходимых директорий и создаст их, если они отсутствуют.

3. Если вы хотите видеть на карте Нижний мир и Край, убедитесь, что в директориях `map_backup/DIM-1/region` и `map_backup/DIM1/region` есть файлы с расширением `.mca`.

### 4. Запуск генерации карты

1. Откройте командную строку (cmd) или PowerShell в папке проекта

2. Запустите скрипт генерации карты:

    ```
    generate_map.bat
    ```

3. Дождитесь завершения генерации карты
    - Время генерации зависит от размера мира (может занять от нескольких минут до часа)
    - Прогресс генерации будет отображаться в консоли

### 5. Просмотр карты

-   После успешного завершения генерации откройте файл `map/index.html` в браузере
-   Вы увидите интерактивную карту с вкладками для каждого измерения (обычный мир, Нижний мир, Край)

## Настройка производительности

Вы можете настроить количество используемых процессов для ускорения генерации карты:

1. Откройте командную строку (cmd) или PowerShell

2. Установите переменную окружения перед запуском скрипта:

    ```
    set OVERVIEWER_PROCESSES=4
    generate_map.bat
    ```

    Где `4` - количество процессов (рекомендуется установить равным количеству ядер вашего процессора)

## Технические детали

### Используемые пути

Скрипт генерации карты использует следующие абсолютные пути:

-   **Корневая директория проекта**: Директория, где находится скрипт `generate_map.bat`
-   **Путь к миру**: `[Корневая директория]\map_backup`
-   **Путь к выходной директории**: `[Корневая директория]\map`
-   **Путь к текстурам**: `[Корневая директория]\minecraft_assets\1.21.4_optifine\client.jar`

Эти пути автоматически определяются скриптом, и вам не нужно их изменять, если вы сохраняете структуру проекта.

## Решение частых проблем

### Ошибка "Файл client.jar не найден"

Убедитесь, что файл `client.jar` находится в папке `minecraft_assets/1.21.4_optifine/`. Если файл отсутствует:

1. Скопируйте файл `client.jar` из папки `.minecraft/versions/1.21.4/` в папку `minecraft_assets/1.21.4_optifine/`
2. Полный путь к файлу должен быть: `minecraft_map/minecraft_assets/1.21.4_optifine/client.jar`

### Не отображаются Нижний мир или Край

Если на карте не отображаются Нижний мир или Край, проверьте наличие соответствующих директорий в папке `map_backup`:

1. Запустите скрипт `check_dimensions.bat` для проверки и создания необходимых директорий
2. Убедитесь, что в директориях `map_backup/DIM-1/region` и `map_backup/DIM1/region` есть файлы с расширением `.mca`
3. Если файлы `.mca` отсутствуют, это означает, что в вашем мире нет данных для Нижнего мира или Края

### Ошибка "Python не найден"

1. Убедитесь, что Python добавлен в переменную PATH:
    - Откройте "Панель управления" -> "Система" -> "Дополнительные параметры системы" -> "Переменные среды"
    - В разделе "Переменные среды пользователя" найдите переменную PATH
    - Убедитесь, что путь к Python присутствует в списке
    - Если нет, добавьте его и перезапустите командную строку

### Ошибка при запуске overviewer.exe

1. Убедитесь, что все файлы в папке `overviwer` имеют права на чтение и выполнение
2. Попробуйте запустить overviewer.exe напрямую из командной строки:
    ```
    cd overviwer
    overviewer.exe --help
    ```

### Карта не генерируется

1. Проверьте, что путь к проекту не содержит кириллицу или специальные символы
    - Лучше всего разместить проект в корне диска, например: `C:\minecraft_map\`
2. Убедитесь, что в папке `map_backup` есть файл level.dat и папка region с файлами .mca

## Обновление карты

Для обновления карты после изменений в мире Minecraft, просто запустите скрипт генерации карты снова:

```
generate_map.bat
```

## Дополнительная информация

-   Проект использует Minecraft Overviewer для генерации карты
-   Подробная документация по Overviewer: https://docs.overviewer.org/
-   Если у вас возникли проблемы, создайте issue в репозитории проекта
